{% extends 'base.html' %}

{% block content %}

<div class="ui grid container">
    <!-- LEFT CITY CONTAINER -->
    <div class="ui yellow five wide column">
        <div class= "ui header">All Cities</div>        
        {% for town in towns %}
        <a href="{% url 'city_show' town.id %}">
            <div class="ui fluid vertical pointing menu">   
                <div class="ui item">{{town.name}}
                    <img src="{{town.image}}" alt="{{town.name}}" class="ui left floated mini image">  
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    <!-- RIGHT POST SHOW -->
    <div class="ui eleven wide column">
        <div class="ui vertically divided relaxed grid container">
            <div class="ui right floated row"> 
                <div class="ui header" id="city_head"></div>
                <img src="{{city.image}}" alt="{{city.name}}" class="ui medium image">
            </div>
            <div class="row">
                <div class="ui header">{{city.name}}: &nbsp Posts
                   &nbsp &nbsp 
                   <a href="/posts/new" id="app_post">
                        <i class="right floated red plus circle icon" ></i>
                   </a>
                </div>
            </div>
                <div class="ui vertical menu" id="post_menu">
                {% for post in posts %}
                    <div class=" ui item">
                        <a href="/posts/{{ post.id }}" > 
                            <h4 class="ui header">Title: {{ post.title }}</h4>
                            <h5>{{ post.text }}</h5>
                        </a>
                    </div>
                {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ADD POST MODALS -->
<div class="ui post modal">
    <i class="close icon"></i>
    <div class="header">Add Post</div>
    <div class="content">
        <form action= "{% url 'post_new' %}" method="POST">
            {% csrf_token %}
            {{ post_form.as_p}}
            <input type="submit" class="ui green button" value="new post">
        </form>
    </div> 
</div>
{% endblock content %}