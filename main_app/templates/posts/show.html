{% extends 'base.html' %}
{% block content %}

<div class="ui items container">
  <!-- MAIN IMAGE -->
  <a href="{% url 'city_show' post.city.id %}" class="ui centered large image row">
    <img class= "ui centered image" src="{{ post.city.image }}">
    <div class="ui bottom attached label">{{post.city.name}}</div>
  </a>
  <div class="ui hidden divider"></div>


  <!-- CONTENT -->
  <div class="content">
    <div class="ui huge header">{{ post.title }}
      <div class="ui sub header">
          <img  src="{{user.profile.image}}" alt="user image" class="ui avatar image">
          <a href="{% url 'profile_show' user.profile.id %}">
            <span>{{ user }}</span> 
          </a>
      </div>
      <div class="ui sub header">
        <span>{{ post.date_created }}</span>
      </div>
    </div>
    <div class="ui divider"></div>
    <div class="description">
      <p>{{ post.text }}</p>
    </div>
    <div class="ui hidden divider"></div>
    
    <!-- BUTTONS -->
    <div class="ui buttons">
        <a id="app_comment"><button class="ui yellow button">Comment</button></a>
      {% if request.user.id == post.author.id %}
        <div class="or"></div>
        <a href="{% url 'post_edit' post.id %}"><button class="ui green button">Edit</button></a>
        <div class="or"></div>
        <a> <button class="ui red button" id="app_post_delete">Delete</button></a>
      {% endif %}
      </div>
    
    <!-- MODALS -->
    <div class="ui small modal">
      <i class="close icon"></i>
      <div class="header">
        Delete
      </div>
      <div class="image content">
        <div class="description">
          <div class="ui header">"Are you sure you want to delete '{{ post.title }}' post?"</div>
        </div>
      </div>
      <div class="actions">
        <button class="ui green deny button">cancel</button>
        <a href="{% url 'post_delete' post.id %}"><button class="ui red button">delete</button></a>
    </div>
</div>


  </div>
</div>

<div>
  {% for comment in comments %}
      <div class=" ui item">
              <h5>{{ comment.text }}</h5>
      </div>
  {% endfor %}
</div>

<div class="ui comment modal">
  <i class="close icon"></i>
  <div class="header">Add Comment</div>
  <div class="content">
      <form class="ui form" action= "{% url 'add_comment' post.id %}" method="POST">
          {% csrf_token %}
          {{ comment_form.as_p}}
          <input type="submit" class="ui yellow button" value="Add New Comment">
      </form>
  </div> 
</div>

{% endblock %}